/*
 * main.c
 *
 *  Created on: Feb 27, 2020
 *      Author: marcl
 */
#include <stdio.h>
#include "leds_control.h"
#include <unistd.h>


typedef struct{
	int RValue;
	int GValue;
	int BValue;
}color;


//void SetLedColor(color ledcolor){
//	if (ledcolor.RValue != 0 && ledcolor.GValue == 0 && ledcolor.BValue == 0){
//		printf("Red %d ",ledcolor.RValue);
//	}
//	else if (ledcolor.RValue == 0 && ledcolor.GValue != 0 && ledcolor.BValue == 0){
//		printf("Green %d ",ledcolor.GValue);
//	}
//	else if (ledcolor.RValue == 0 && ledcolor.GValue == 0 && ledcolor.BValue != 0){
//		printf("Blue %d ",ledcolor.BValue);
//	}
//	else if ((ledcolor.RValue == ledcolor.GValue) && (ledcolor.GValue == ledcolor.BValue)){
//		if (ledcolor.RValue == 0){
//			printf("Black %d ",ledcolor.RValue);
//		}
//		else{
//		printf("White %d ",ledcolor.RValue);
//		}
//	}
//	else if (ledcolor.RValue !=0 && ledcolor.GValue == 0 && ledcolor.BValue !=0 ){
//		printf("Purple %d ",ledcolor.RValue);
//	}
//	else if (ledcolor.RValue == ledcolor.GValue && ledcolor.BValue ==0 ){
//		printf("yellow %d ",ledcolor.RValue);
//	}
//}
//

//setLedColor(const unsigned int row,
//            const unsigned int col,
//            const unsigned int red,
//            const unsigned int green,
//            const unsigned int blue);


//recoit un tableau et l'affiche//
void Setledline(color **tabline, int tabsize){
	for (int row = 0; row < tabsize; row ++){
		for (int col = 0; col < tabsize; col ++){
			setLedColor((row + 1), (col + 1), tabline[row][col].RValue, tabline[row][col].GValue, tabline[row][col].BValue );
		}
	}
}

//créée et affiche un tableau de couleur unie//
void Setonecolor(color color_selected,int tabsize){
	color line [7] = {color_selected, color_selected, color_selected, color_selected, color_selected, color_selected, color_selected};
	color * tabline [7] = {line, line, line, line, line, line, line};
	Setledline(tabline, tabsize);
}


//créée et affiche tableau avec numéro//
void Setnumber(int number, color nbr_color, color bckgrnd, int tabsize){
	if (number == 1){
		color line_1 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color line_2 [7] = {bckgrnd, bckgrnd, bckgrnd, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color line_3 [7] = {bckgrnd, bckgrnd, nbr_color, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color line_4 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color line_5 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color line_6 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color line_7 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color *number_tabline [7] = {line_1, line_2, line_3, line_4, line_5, line_6, line_7};
		Setledline(number_tabline, tabsize);

	}
	if (number == 2){
		color line_1 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color line_2 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_3 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_4 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color line_5 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd};
		color line_6 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd};
		color line_7 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, nbr_color, bckgrnd};
		color *number_tabline [7] = {line_1, line_2, line_3, line_4, line_5, line_6, line_7};
		Setledline(number_tabline, tabsize);

	}
	if (number == 3){
		color line_1 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color line_2 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_3 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_4 [7] = {bckgrnd, bckgrnd, bckgrnd, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color line_5 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_6 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_7 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color *number_tabline [7] = {line_1, line_2, line_3, line_4, line_5, line_6, line_7};
		Setledline(number_tabline, tabsize);

	}
	if (number == 4){
		color line_1 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color line_2 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color line_3 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color line_4 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color line_5 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, bckgrnd, bckgrnd, bckgrnd};
		color line_6 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color line_7 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color *number_tabline [7] = {line_1, line_2, line_3, line_4, line_5, line_6, line_7};
		Setledline(number_tabline, tabsize);

	}
	if (number == 5){
		color line_1 [7] = {bckgrnd, nbr_color, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color line_2 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd};
		color line_3 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd};
		color line_4 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, bckgrnd, bckgrnd, bckgrnd};
		color line_5 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color line_6 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color line_7 [7] = {bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd, bckgrnd};
		color *number_tabline [7] = {line_1, line_2, line_3, line_4, line_5, line_6, line_7};
		Setledline(number_tabline, tabsize);

	}
	if (number == 6){
		color line_1 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color line_2 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd};
		color line_3 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd};
		color line_4 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color line_5 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_6 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_7 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color *number_tabline [7] = {line_1, line_2, line_3, line_4, line_5, line_6, line_7};
		Setledline(number_tabline, tabsize);

	}
	if (number == 7){
		color line_1 [7] = {bckgrnd, nbr_color, nbr_color, nbr_color, nbr_color, nbr_color, bckgrnd};
		color line_2 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_3 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_4 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd};
		color line_5 [7] = {bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd};
		color line_6 [7] = {bckgrnd, bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, bckgrnd};
		color line_7 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd};
		color *number_tabline [7] = {line_1, line_2, line_3, line_4, line_5, line_6, line_7};
		Setledline(number_tabline, tabsize);

	}
	if (number == 8){
		color line_1 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color line_2 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_3 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_4 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color line_5 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_6 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_7 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color *number_tabline [7] = {line_1, line_2, line_3, line_4, line_5, line_6, line_7};
		Setledline(number_tabline, tabsize);

	}
	if (number == 9){
		color line_1 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color line_2 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_3 [7] = {bckgrnd, nbr_color, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_4 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color line_5 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_6 [7] = {bckgrnd, bckgrnd, bckgrnd, bckgrnd, bckgrnd, nbr_color, bckgrnd};
		color line_7 [7] = {bckgrnd, bckgrnd, nbr_color, nbr_color, nbr_color, bckgrnd, bckgrnd};
		color *number_tabline [7] = {line_1, line_2, line_3, line_4, line_5, line_6, line_7};
		Setledline(number_tabline, tabsize);
	}
}


void countdown(int countdown,color nbr_color, color bckgrnd, int tabsize){
	for(int count = countdown; count > 0; count --){
		sleep(1);
		Setnumber(count, nbr_color, bckgrnd, tabsize);
	}
}

int main(){
	int tabsize = 7;
	//création des couleurs//
	color white, green, blue, red, purple, yellow, black;
	white.BValue = 255;	white.RValue = 255;	white.GValue = 255;	green.GValue = 255;
	green.BValue = 0; green.RValue = 0; blue.BValue = 255; blue.RValue = 0; blue.GValue = 0;
	red.RValue = 255; red.GValue = 0; red.BValue = 0; purple.RValue = 255;
	purple.BValue = 255; purple.GValue = 0;	yellow.GValue = 255; yellow.RValue = 255;
	yellow.BValue = 0; black.GValue = 0; black.BValue = 0; black.RValue = 0;

	//tableau de test initial//
	color line_1 [7] = {red, red, red, red, red, red, red};
	color line_2 [7] = {red, black, black, black, black, black, red};
	color line_3 [7] = {red, black, green, green, green, black, red};
	color line_4 [7] = {red, black, green, yellow, green, black, red};
	color line_5 [7] = {red, black, green, green, green, black, red};
	color line_6 [7] = {red, black, black, black, black, black, red};
	color line_7 [7] = {red, red, red, red, red, red, red};
	color *tabline [7] = {line_1, line_2, line_3, line_4, line_5, line_6, line_7};


	Setledline(tabline, tabsize);
	Setnumber(6, blue, white, tabsize);
	Setonecolor(black, tabsize);
	countdown(9, white, blue, tabsize);
}
